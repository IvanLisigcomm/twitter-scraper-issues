# 更新日志

所有重要的项目变更都会记录在此文件中。

版本格式遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [v2.2] - 2025-10-01

### 新增功能
- ✅ **任务控制功能**：添加了暂停、恢复、取消正在运行的爬取任务
  - 新增 `/api/pause` 接口
  - 新增 `/api/resume` 接口
  - 新增 `/api/cancel` 接口
- ✅ **ChromeDriver 自动修复**：改进了 ChromeDriver 安装和配置逻辑
  - 自动重试机制（最多3次）
  - 自动清理损坏的缓存
  - 自动查找正确的驱动文件路径
- ✅ **进度和控制回调**：爬虫类支持进度回调和控制回调函数
  - `progress_callback`: 实时更新爬取进度
  - `control_callback`: 支持暂停/恢复/取消控制

### 改进
- ✅ 优化了爬取逻辑，使用更稳定的去重机制
- ✅ 改进了文档的准确性和完整性
- ✅ 增强了错误处理和用户提示
- ✅ 代码注释更加详细完善
- ✅ 统一配置文件：`output_directory` 改为 `./data`

### 修复
- 🐛 修复了 ChromeDriver 路径识别问题（支持 macOS arm64/x64）
- 🐛 修复了配置文件与实际目录不一致的问题

---

## [v2.1] - 2025-10-01

### 新增功能
- ✅ **CSV 文件在线预览**：支持在 Web 界面预览 CSV 文件
- ✅ **格式标签显示**：文件列表中显示 CSV/JSON 格式标签
- ✅ **默认格式优化**：默认保存格式改为 CSV
- ✅ **端口优化**：Web 服务默认端口改为 8887

### 改进
- ✅ 预览功能优先查找 CSV 文件
- ✅ 历史记录中所有文件都可预览
- ✅ API 同时支持 CSV 和 JSON 预览
- ✅ 统一预览界面体验

---

## [v2.0] - 2025-10-01

### 新增功能 - 全新 Web 界面
- ✨ **现代化 SaaS 风格 UI**
  - 深色主题设计
  - 渐变背景和流畅动画
  - 响应式布局（支持桌面、平板、移动端）
- ✨ **实时进度追踪**
  - 可视化进度条
  - 实时状态更新
  - 当前/目标推文数显示
- ✨ **数据在线预览**（JSON 格式）
  - 预览前 10 条推文
  - 格式化显示
- ✨ **历史记录管理**
  - 查看所有爬取文件
  - 一键预览/下载
  - 文件大小、时间显示
- ✨ **REST API 接口**
  - `/api/scrape` - 开始爬取
  - `/api/status` - 获取状态
  - `/api/preview/<filename>` - 预览文件
  - `/api/download/<filename>` - 下载文件
  - `/api/history` - 历史记录

### 技术栈
- Flask 3.0.0
- Flask-CORS 4.0.0
- 现代化前端（HTML5、CSS3、ES6+）
- Font Awesome 图标

---

## [v1.0] - 2025-09-27

### 初始版本功能
- ✨ **基本推文爬取功能**
  - 爬取指定用户的推文
  - 支持自定义数量
  - 命令行交互
- ✨ **反检测机制**
  - 随机 User-Agent
  - 禁用自动化标识
  - 模拟人工行为
- ✨ **数据导出**
  - JSON 格式
  - CSV 格式（UTF-8 BOM 编码）
- ✨ **智能特性**
  - 智能去重
  - 自动滚动加载
  - 完整数据提取（文本、时间、点赞、转发、评论）
- ✨ **ChromeDriver 管理**
  - 自动下载和配置
  - webdriver-manager 集成
- ✨ **错误处理**
  - 网络超时处理
  - 页面加载检测
  - 异常捕获和日志

### 技术实现
- Python 3.7+
- Selenium 4.15.2
- BeautifulSoup4 4.12.2
- webdriver-manager 4.0.1
- fake-useragent 1.4.0

---

## 版本说明

### 版本号格式
- **主版本号**：重大架构变更或不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 标记说明
- ✨ 新增功能
- ✅ 改进优化
- 🐛 Bug 修复
- 🔧 配置变更
- 📝 文档更新
- ⚠️ 废弃警告
- 🗑️ 功能移除

---

## 未来计划

### v2.3 (计划中)
- [ ] 支持登录账户爬取
- [ ] 支持搜索关键词爬取
- [ ] 数据可视化图表
- [ ] 导出更多格式（Excel、SQLite）
- [ ] 定时任务和批量爬取

### v3.0 (计划中)
- [ ] 数据库存储支持
- [ ] 用户账户系统
- [ ] 多用户并发支持
- [ ] 云部署方案
- [ ] Docker 容器化

---

**最后更新**: 2025-10-01

